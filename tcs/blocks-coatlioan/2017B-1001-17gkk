proposal::setidentifier "2017B-1001"
visit::setidentifier "0"
visit::setname "SN 17gkk"
block::settotalexposures 0
visit::settargetcoordinates equatorial 03:37:44.97 +72:31:59.00 2000

proc SELECTABLE {args} {
  return [expr {
    [withintelescopepointinglimits] && 
    [maxskybrightness "nauticaltwilight"] &&
    [maxfocusdelay 1200] &&
    [minmoonseparation "15d"]
  }]
}

proc EXECUTE {args} {

  set exposuretime       30
  set exposuresperdither 2
  set filters            {BB BR}
  
  executor::setsecondaryoffset 0
  executor::track

  executor::setreadmode 1MHz
  executor::setwindow "default"
  executor::setbinning 2

  executor::waituntiltracking

  foreach {alphaoffset deltaoffset} {
      0as   0as
    +30as +30as
    +30as -30as
    -30as -30as
    -30as +30as
      0as -30as
    +30as   0as
      0as +30as
    -30as   0as
  } {

    executor::offset   "default"
    executor::waituntiltracking

    foreach filter  {
      movefilterwheel 
      set i 0
      while { < } {
        executor::expose object 
        incr i
      }
    }

  }

  return false
}
