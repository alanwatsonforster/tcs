########################################################################

# This file is part of the UNAM telescope control system.

########################################################################

# Copyright Â© 2011, 2012, 2013, 2014, 2016, 2017, 2018, 2019 Alan M. Watson <alan@astro.unam.mx>
#
# Permission to use, copy, modify, and distribute this software for any
# purpose with or without fee is hereby granted, provided that the above
# copyright notice and this permission notice appear in all copies.
#
# THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL
# WARRANTIES WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED
# WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE
# AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL
# DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR
# PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER
# TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
# PERFORMANCE OF THIS SOFTWARE.

########################################################################

include ../../../Makefile.prolog

########################################################################

.SUFFIXES:  .md .html
.md.html			:
	./make-html "$*".md >"$*".html
	
########################################################################

installs			:=	\
	.htaccess			\
	blank.png			\
	cgi.tcl				\
	jquery.js			\
	style.css			\
	tcs.js
	
installbins			:=	\
	request.cgi			\

installs_project_coatlioan	:=		     \
	allsky-project-coatlioan.html		 \
	C0-project-coatlioan.html       	 \
	config-project-coatlioan.js		     \
	operations-project-coatlioan.html	 \
	engineering-project-coatlioan.html   \
	interface.html                       \
	webcam-a-project-coatlioan.html		 \
	webcam-b-project-coatlioan.html		 \
	webcam-c-project-coatlioan.html		 \
	webcam-cz-project-coatlioan.html     \
	plots-project-coatlioan.html         \
	plots-project-coatlioan.sh

installs_project_ddotioan	:=		     \
	allsky-project-ddotioan.html		 \
	C0-project-ddotioan.html  	     	 \
	C1-project-ddotioan.html  	     	 \
	C2-project-ddotioan.html  	     	 \
	C3-project-ddotioan.html  	     	 \
	C4-project-ddotioan.html  	     	 \
	C5-project-ddotioan.html  	     	 \
	config-project-ddotioan.js		     \
	operations-project-ddotioan.html  	 \
	interface.html                       \
	engineering-project-ddotioan.html    \
	alerts-project-ddotioan.html	     \
	webcam-a-project-ddotioan.html		 \
	webcam-b-project-ddotioan.html		 \
	webcam-c-project-ddotioan.html		 \
	webcam-cz-project-ddotioan.html      \
	plots-project-ddotioan.sh

installs_project_colibricu	:=		     \
	allsky-project-colibricu.html      	 \
	C0-project-colibricu.html  	     	 \
	config-project-colibricu.js		     \
	operations-project-colibricu.html	 \
	engineering-project-colibricu.html   \
	interface.html                       \
	plots-project-colibricu.sh

installs_project_colibriohp	:=		     \
	allsky-project-colibriohp.html     	 \
	C0-project-colibriohp.html  	   	 \
	config-project-colibriohp.js	     \
	operations-project-colibriohp.html   \
	engineering-project-colibriohp.html  \
	interface.html                       \
	webcam-a-project-colibriohp.html	 \
	plots-project-colibriohp.sh

installs_project_coatlicu		:=		 \
	operations-project-coatlicu.html	 \
	engineering-project-coatlicu.html    \
	interface.html                       \
	alerts-project-coatlicu.html	     \
	C0-project-coatlicu.html  	         \
	config-project-coatlicu.js		     \

installs_project_test		:=		     \
	operations-project-test.html		 \
	C0-project-test.html  	     		 \
	config-project-test.js			     \

EXTRA_INSTALLS			:=	\
	install-webcam-link

INSTALL_DIR			:=	$(prefix)/var/www/tcs/

include ../../../Makefile.epilog

install-crontab			:
	sudo -u www-data crontab <crontab

install-webcam-link		:
	sudo mkdir -p $(INSTALL_DIR)
	sudo rm -f $(INSTALL_DIR)/webcam
	sudo ln -s $(prefix)/var/tcs/latest/webcam $(INSTALL_DIR)
	
plots-project-coatlioan.html    : plots-project-coatlioan.md

