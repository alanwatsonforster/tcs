########################################################################

# This file is part of the UNAM telescope control system.

########################################################################

# Copyright Â© 2011, 2012, 2013, 2014, 2016, 2017, 2018, 2019 Alan M. Watson <alan@astro.unam.mx>
#
# Permission to use, copy, modify, and distribute this software for any
# purpose with or without fee is hereby granted, provided that the above
# copyright notice and this permission notice appear in all copies.
#
# THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL
# WARRANTIES WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED
# WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE
# AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL
# DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR
# PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER
# TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
# PERFORMANCE OF THIS SOFTWARE.

########################################################################

include ../../../Makefile.prolog

########################################################################

.SUFFIXES:  .md .html
.md.html			:
	./make-html "$*".md >"$*".html
	
########################################################################

installs			:=	\
	.htaccess			\
	blank.png			\
	cgi.tcl				\
	jquery.js			\
	style.css			\
	tcs.js
	
installbins			:=	\
	request.cgi			\

installs_project_coatli	:=		     \
	allsky-project-coatli.html		 \
	C0-project-coatli.html       	 \
	config-project-coatli.js		     \
	operations-project-coatli.html	 \
	engineering-project-coatli.html   \
	interface.html                       \
	webcam-a-project-coatli.html		 \
	webcam-b-project-coatli.html		 \
	webcam-c-project-coatli.html		 \
	webcam-cz-project-coatli.html     \
	plots-project-coatli.html         \
	plots-project-coatli.sh

installs_project_ddoti	:=		     \
	allsky-project-ddoti.html		 \
	C0-project-ddoti.html  	     	 \
	C1-project-ddoti.html  	     	 \
	C2-project-ddoti.html  	     	 \
	C3-project-ddoti.html  	     	 \
	C4-project-ddoti.html  	     	 \
	C5-project-ddoti.html  	     	 \
	config-project-ddoti.js		     \
	operations-project-ddoti.html  	 \
	interface.html                       \
	engineering-project-ddoti.html    \
	alerts-project-ddoti.html	     \
	webcam-a-project-ddoti.html		 \
	webcam-b-project-ddoti.html		 \
	webcam-c-project-ddoti.html		 \
	webcam-cz-project-ddoti.html      \
	plots-project-ddoti.html          \
	plots-project-ddoti.sh

installs_project_colibriohp	:=		     \
	allsky-project-colibriohp.html     	 \
	C0-project-colibriohp.html  	   	 \
	config-project-colibriohp.js	     \
	operations-project-colibriohp.html   \
	engineering-project-colibriohp.html  \
	interface.html                       \
	webcam-a-project-colibriohp.html	 \
	plots-project-colibriohp.sh

installs_project_test		:=		     \
	operations-project-test.html		 \
	engineering-project-test.html		 \
	C0-project-test.html  	     		 \
	config-project-test.js			     \

EXTRA_INSTALLS			:=	\
	install-webcam-link

INSTALL_DIR			:=	$(prefix)/var/www/tcs/

include ../../../Makefile.epilog

install-crontab			:
	sudo -u www-data crontab <crontab

install-webcam-link		:
	sudo mkdir -p $(INSTALL_DIR)
	sudo rm -f $(INSTALL_DIR)/webcam
	sudo ln -s $(prefix)/var/tcs/latest/webcam $(INSTALL_DIR)
	
plots-project-coatli.html    : plots-project-coatli.md

